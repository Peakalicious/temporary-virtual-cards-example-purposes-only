<!-- Google Sites: Tilt + Reflection + Flip (glow clipped to card only) -->
<iframe
  style="width:100%;max-width:820px;aspect-ratio:745/1039;border:0;border-radius:22px;background:transparent;overflow:hidden"
  sandbox="allow-scripts allow-same-origin"
  srcdoc='<!doctype html><html><head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Card</title>
<style>
  :root{ --max-tilt:12deg; --radius:22px; }

  *{box-sizing:border-box}
  html,body{
    height:100%;
    margin:0;
    background:transparent;
    overflow:hidden; /* no scrollbars */
  }

  /* slight padding to avoid clipping tilt */
  .stage{
    width:100%; height:100%;
    display:grid; place-items:center;
    background:transparent;
    padding:12px; /* safe space */
  }

  .wrap{
    width:100%;
    max-width:820px;
    aspect-ratio:745/1039;
    perspective:1400px;
    cursor:pointer;
  }

  .card{
    position:relative;
    width:100%; height:100%;
    transform-style:preserve-3d;
  }

  .flipper{
    position:absolute; inset:0;
    transform-style:preserve-3d;
    transition:transform 420ms cubic-bezier(.2,.8,.2,1);
    will-change:transform;
    z-index:1; /* under the fx mask */
  }
  .wrap.flipped .flipper{ transform:rotateY(180deg); }

  .face{
    position:absolute; inset:0;
    border-radius:var(--radius);
    overflow:hidden;
    backface-visibility:hidden;
    transform-style:preserve-3d;
    background:transparent;
  }
  .face img{
    position:absolute; inset:0;
    width:100%; height:100%;
    object-fit:cover; object-position:center;
    display:block;
    transform:translateZ(.01px);
  }
  .back{ transform:rotateY(180deg); }

  /* New: clipping mask to confine all glow to card only */
  .fx-mask{
    position:absolute; inset:0;
    border-radius:var(--radius);
    overflow:hidden;              /* <- clips the glow */
    pointer-events:none;
    z-index:2;                    /* above faces, below pointer */
    transform:translateZ(0);      /* keep it in the same 3D context */
  }

  /* Same reflections you liked, now inside the mask */
  .shine{
    position:absolute; inset:0;
    background:linear-gradient(120deg,rgba(255,255,255,0) 40%,rgba(255,255,255,.10) 48%,rgba(255,255,255,0) 56%);
    mix-blend-mode:overlay;
    transform:translateZ(25px);
  }
  .glare{
    position:absolute; inset:0;   /* was -20%; now clipped so 0 */
    background:radial-gradient(circle at var(--gx,50%) var(--gy,50%),
      rgba(255,255,255,.30), rgba(255,255,255,.10) 18%, transparent 60%);
    mix-blend-mode:screen;
    transform:translateZ(50px);
    opacity:.65; transition:opacity .2s ease;
  }

  @media (prefers-reduced-motion:reduce){
    .card{transition:none !important; transform:none !important}
    .glare{opacity:0 !important}
  }
</style>
</head><body>
  <div class="stage">
    <div class="wrap" id="wrap" aria-label="Interactive card">
      <div class="card" id="card">
        <div class="flipper" id="flipper">
          <div class="face front"><img alt="Front" src="https://github.com/Peakalicious/virtual-cards-image-housing/blob/main/Icon_Chess_MagnusCarlsen_Holo.png?raw=true"/></div>
          <div class="face back"><img alt="Back"  src="https://github.com/Peakalicious/virtual-cards-image-housing/blob/main/Icon_CardBack.png?raw=true"/></div>
        </div>

        <!-- Effects are now inside a rounded, overflow-hidden mask -->
        <div class="fx-mask">
          <div class="shine"></div>
          <div class="glare" id="glare"></div>
        </div>
      </div>
    </div>
  </div>

<script>
(()=>{const w=document.getElementById("wrap"),c=document.getElementById("card"),g=document.getElementById("glare"),
MAX=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--max-tilt"))||12;
let r=null,raf=null,px=.5,py=.5;

function rect(){r=w.getBoundingClientRect()} rect();
addEventListener("resize",rect,{passive:!0});

function setp(x,y){
  px=(x-r.left)/r.width; py=(y-r.top)/r.height;
  if(px<0)px=0;if(px>1)px=1; if(py<0)py=0;if(py>1)py=1;
  if(!raf) raf=requestAnimationFrame(draw);
}
function draw(){
  raf=null;
  const rx=(.5-py)*2*MAX, ry=(px-.5)*2*MAX;
  c.style.transform=`rotateX(${rx}deg) rotateY(${ry}deg)`;
  g.style.setProperty("--gx",(px*100).toFixed(1)+"%");
  g.style.setProperty("--gy",(py*100).toFixed(1)+"%");
}

w.addEventListener("mousemove",e=>setp(e.clientX,e.clientY));
w.addEventListener("mouseleave",()=>{px=.5;py=.5;c.style.transition="transform 300ms ease";draw();setTimeout(()=>c.style.transition="",320)});
w.addEventListener("touchstart",e=>{const t=e.touches[0];setp(t.clientX,t.clientY)},{passive:!0});
w.addEventListener("touchmove",e=>{const t=e.touches[0];setp(t.clientX,t.clientY)},{passive:!0});
w.addEventListener("touchend",()=>{px=.5;py=.5;if(!raf) raf=requestAnimationFrame(draw)});

w.addEventListener("click",()=>{ w.classList.toggle("flipped"); });

const front=document.querySelector(".front img");
if(front && front.complete){ if(!raf) raf=requestAnimationFrame(draw); }
else if(front){ front.addEventListener("load",()=>{ if(!raf) raf=requestAnimationFrame(draw); }); }
})();
</script>
</body></html>'>
</iframe>
